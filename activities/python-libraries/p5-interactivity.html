<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>P5 - Interactivity</title>
    <script src="../../custom-elements/custom-navbar.js"></script>
    <script src="../../custom-elements/custom-library.js"></script>
    <script type="module" src="../../custom-elements/custom-code-block.js"></script>
    <link rel="stylesheet" href="../../style.css">
    </head>

<body class="container">
    <cc-navbar active="python-libraries" level="2" />

    <h1>P5 library - Interactivity</h1>

    <ul>
        <li>mouse_x & mouse_y</li>
        <li>pmouse_x() & pmouse_y()</li>
        <li>keyboard.key & keyboard.keyCode</li>
        <li>Events:</li>
        <ul>
            <li>key_pressed()</li>
            <li>key_released()</li>
            <li>mouse_moved()</li>
            <li>mouse_pressed()</li>
            <li>mouse_released()</li>
            <li>mouse_dragged()</li>
        </ul>
    </ul>

    <cc-code-block>
from p5 import *

def setup():
    size(300, 300)

def draw():
    background(240)

    push_style()
    fill("purple")
    stroke_weight(5)
    rect(0.1 * width, 0.8 * height, 0.8 * width, 0.1 * height)
    pop_style()
    
    mx, my = mouse_x, mouse_y
    pmx, pmy = pmouse_x(), pmouse_y()
    color = get(mx, my)

    lines = [
        "Use the mouse and the keyboard.",
        "Check the text output.",
        "",
        f"mx={mx:.0f}, my={my:.0f}",
        f"pmx={pmx:.0f}, pmy={pmy:.0f}",
        "",
        f"color.hex = {color.hex}",
        f"color.rgb = {color.red},{color.green},{color.blue}",
        f"color.hsb = {color.hue},{color.saturation:.0f},{color.brightness:.0f}",
    ]
        
    text_align(CENTER, CENTER)
    text("\n".join(lines), width/2, height*0.4)

def key_pressed():
    key, code = keyboard.key, keyboard.keyCode
    print(f"key_pressed - key={key}, code={code}")

def key_released():
    key, code = keyboard.key, keyboard.keyCode
    print(f"key_released - key={key}, code={code}")

def mouse_moved():
    mx, my = mouse_x, mouse_y
    pmx, pmy = pmouse_x(), pmouse_y()
    # print(f"mouse_moved - mx={mx:.0f}, my={my:.0f}, pmx={pmx:.0f}, pmy={pmy:.0f}")

def mouse_pressed():
    mx, my = mouse_x, mouse_y
    pmx, pmy = pmouse_x(), pmouse_y()
    print(f"mouse_pressed - mx={mx:.0f}, my={my:.0f}, pmx={pmx:.0f}, pmy={pmy:.0f}")

def mouse_released():
    mx, my = mouse_x, mouse_y
    pmx, pmy = pmouse_x(), pmouse_y()
    print(f"mouse_released - mx={mx:.0f}, my={my:.0f}, pmx={pmx:.0f}, pmy={pmy:.0f}")

def mouse_dragged():
    mx, my = mouse_x, mouse_y
    pmx, pmy = pmouse_x(), pmouse_y()
    print(f"mouse_dragged - mx={mx:.0f}, my={my:.0f}, pmx={pmx:.0f}, pmy={pmy:.0f}")

def mouse_wheel():
    # TODO: How to obtain the wheel count?
    mx, my = mouse_x, mouse_y
    pmx, pmy = pmouse_x(), pmouse_y()
    print(f"mouse_wheel - mx={mx:.0f}, my={my:.0f}, pmx={pmx:.0f}, pmy={pmy:.0f}")

run()
    </cc-code-block>

</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</html>
